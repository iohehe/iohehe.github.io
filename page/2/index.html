<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Penlab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Penlab">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Penlab">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="iohex">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Penlab" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Penlab</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-why" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/12/25/why/" class="article-date">
  <time class="dt-published" datetime="2021-12-25T05:07:30.000Z" itemprop="datePublished">2021-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/12/25/why/">我为什么很少写安全相关的东西</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我的专业方向是安全，但是我一般很少写安全相关的东西。 这对我来说依然是一件很矛盾的事情， 为什么呢？</p>
<p>就像一个锁匠，他交给一个陌生人开锁，在不了解这个人的情况下，不确定他学会不会去干坏事。 </p>
<p>最近搭了一台服务器，好多exp打来。这些人的exp很可能是从某位师傅文章里直接拿来的。所以我写的安全工具，目前也没有放到网上过。 但是话又说回来了，不交流怎么进步呢，毕竟我从各种师傅那里学了很多，这对我来说实属矛盾。</p>
<p>我接触wooyun的时候，始终没拿邀请码。当时也能挖到一些洞，但是有一次我看到某大学的一个sql注入漏洞被<code>厂商积极忽略</code>，我极其反感这种态度。我拿那个洞去试了一下，根本就没有修。 我的目的是让网络世界更安全，为什么要把别人的东西给你让你公开？后来国内有了各种SRC, 还有一些平台保护措施比较好了，然而我也我不到洞了，师傅们都tql ；）。</p>
<p>有时候想想，自己玩安全真的有种自嗨的感觉，但是做喜欢的事，锦衣夜行有如何？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/12/25/why/" data-id="cl1d6yihd0023kjw5glx31n6j" data-title="我为什么很少写安全相关的东西" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-pointer-analysis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/12/15/pointer-analysis/" class="article-date">
  <time class="dt-published" datetime="2021-12-15T09:57:35.000Z" itemprop="datePublished">2021-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/12/15/pointer-analysis/">pointer_analysis</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>以南大视频课件为主</p>
</blockquote>
<ol>
<li><p>Motivation</p>
</li>
<li><p>Introduction to Pointer Analysis 06:50</p>
<ul>
<li>Pointer Analysis and Alias Analysis 14:50</li>
<li>Application of Pointer Analysis 17:20</li>
</ul>
</li>
<li><p>Key Factors of Pointer Analysis 19:15</p>
<ul>
<li>Heap Abstration 21:30</li>
<li>Context Sensitivity 27:40</li>
<li>Flow Sensitivity 32:30</li>
<li>Analysis Scope 45:40</li>
<li>Pointer Analysis in This Course 52:20  –&gt; 60:20</li>
</ul>
</li>
<li><p>Concerned Statements 64:50</p>
</li>
<li><p>Conclusion&amp;下节课内容 77:00</p>
</li>
</ol>
<h1 id="指针分析"><a href="#指针分析" class="headerlink" title="指针分析"></a>指针分析</h1><blockquote>
<p>南大小课堂开课啦～</p>
</blockquote>
<h2 id="Problem-of-CHA"><a href="#Problem-of-CHA" class="headerlink" title="Problem of CHA"></a>Problem of CHA</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">Number</span> <span class="variable">n</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">One</span>();</span><br><span class="line">  <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> n.get();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Number</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">get</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Zero</span> <span class="keyword">implements</span> <span class="title class_">Number</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">One</span> <span class="keyword">implements</span> <span class="title class_">Number</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Two</span> <span class="keyword">implements</span> <span class="title class_">Number</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">()</span> &#123;<span class="keyword">return</span> <span class="number">2</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，很显然object n，new的是一个One。 </p>
<p>因此返回1。</p>
<blockquote>
<p>如果按照CHA, 那么X就是根据变量类型(Number)来解， 而Number有三个子类。因此此时x指向3个值(0, 1, 2)</p>
</blockquote>
<p>一句话，CHA看不到object的声明类型。</p>
<p>因此在做常量传播的时候，我们的CHA方法就会拿到两个假值(0,2)，此时的结果就是NAC(不精确)。</p>
<p>而做指针分析， 故名思义，就是知道n指向哪个object。</p>
<blockquote>
<p>一个 class在new 的时候， 会做如下事情： 在内存中构造一个object, 运行构造函数，并使用n指向这个object, 因此这里的n就等同与一个指向object地址的指针。</p>
</blockquote>
<p>这个例子中，指针分析可以知道n指向<code>new One</code>这个唯一对象。然后构造调用图(对new One做dispatch)， 得到唯一一个get方法。  </p>
<hr>
<h2 id="指针分析介绍"><a href="#指针分析介绍" class="headerlink" title="指针分析介绍"></a>指针分析介绍</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>指针分析可以看作一个基础的静态分析， 他回答的问题是程序中每个指针可以指向那些地址。</p>
<p>对于OO语言 来说，指针分析回答的是一个变量(或者field)可以指向哪些object(may analysis)。</p>
<blockquote>
<p>Answer: Which <strong>object</strong> a <strong>pointer</strong> can point to?</p>
</blockquote>
<p>Let’s explain it by an analysis process:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">  <span class="type">B</span> <span class="variable">x</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">  a.setB(x);</span><br><span class="line">  <span class="type">B</span> <span class="variable">y</span> <span class="operator">=</span> a.getB();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  B b;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">setB</span><span class="params">(B b)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.b = b;</span><br><span class="line">  &#125;</span><br><span class="line">  B <span class="title function_">getB</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本例子中，类A 是类B的容器，并提供了get, set方法。 在foo()方法中，独立的new了A和B。 而变量a是<code>new A</code>的指针，变量x是<code>new B</code>的指针。 之后，a调用 setB方法将<code>new B()</code>，store进了<code>new A()</code>。接着又声明了变量y，通过getB方法获取了<code>new B</code>（指向，没 new）。</p>
<img src="img/image-20211215193741664.png" alt="image-20211215193741664" style="zoom:50%;" />

<blockquote>
<p>很datalog </p>
</blockquote>
<h2 id="Key-Factors-of-Pointer-Analysis"><a href="#Key-Factors-of-Pointer-Analysis" class="headerlink" title="Key Factors of Pointer Analysis"></a>Key Factors of Pointer Analysis</h2><h3 id="Allocation-Site-Abstraction"><a href="#Allocation-Site-Abstraction" class="headerlink" title="Allocation-Site Abstraction"></a>Allocation-Site Abstraction</h3><h3 id="Context-Sensitivity"><a href="#Context-Sensitivity" class="headerlink" title="Context Sensitivity"></a>Context Sensitivity</h3><blockquote>
<p>How to model calling contexts? </p>
</blockquote>
<p>上下文敏感，在指针分析中，如何对调用上下文进行建模。</p>
<p><code>上下文</code>这个概念有点抽象。就是一个过程调用另一个过程时工作栈上的状态(好像更抽象了)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">foo</span><span class="params">(<span class="type">int</span> p)</span> &#123;</span><br><span class="line"> 		<span class="keyword">if</span> (p == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">  	<span class="type">Test</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">    <span class="type">Test</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">    <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">test_a</span> <span class="operator">=</span> a.foo(x);</span><br><span class="line">  	x = <span class="number">2</span>;	</span><br><span class="line">  	<span class="type">boolean</span> <span class="variable">test_b</span> <span class="operator">=</span> b.foo(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>对于上下文敏感，对于同一个方法，他有多个上下文，么个上下文分别分析一次</p>
<img src="img/image-20211215201557399.png" alt="image-20211215201557399" style="zoom:80%;" />

<p>这里有两个上下文，就会有两个不同的分析。</p>
<p>对于上下文不敏感：</p>
<p><img src="/img/image-20211215202037637.png" alt="image-20211215202037637"></p>
<p>方法foo()只分析一次。 汇合上下文可能会丢失精度。</p>
<blockquote>
<p>向下文敏感技术是一个重要技术，他能很大程度提高分析精度</p>
</blockquote>
<h3 id="Flow-Sensitivity"><a href="#Flow-Sensitivity" class="headerlink" title="Flow Sensitivity"></a>Flow Sensitivity</h3><blockquote>
<p>How to model control flow?</p>
</blockquote>
<p>因为同样的语句，如果顺序不同可能结果就不一样</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line">a = b;</span><br><span class="line"><span class="type">int</span> c;</span><br><span class="line">c = b-a;</span><br><span class="line">c = a-b;</span><br></pre></td></tr></table></figure>



<p>在程序的每一个点,都维护着一个映射(状态)。 每一条语句，都存着数据流到达这一点的数据流信息</p>
<p>在指针分析中要做的流敏感，就要让每一个指针维持一个指向关系集合：</p>
<p><img src="/img/image-20211215203219981.png" alt="image-20211215203219981"></p>
<p>在这个图片中， 可以看到变量c指向了<code>new C</code>, 经过Allocation-site Abstraction后就是o1</p>
<blockquote>
<p>c-&gt;{o1}</p>
</blockquote>
<p>然后第二句对一个字面量<code>&quot;x&quot;</code>进行了store操作，符号c.f也就是<code>o1.f</code>。</p>
<p>第三句中<code>s = c.f</code>把o1.f取出来塞给了s。</p>
<p>到了第四句<code>o1.f</code>更新了。</p>
<p>人为的去审计当然是指影响<code>o1.f</code>了，因为顺序执行,<code>s</code>的赋值语句已经被执行过了。</p>
<p>但是在流不敏感的情况下， 分析程序只知道: <code>s = o1.f</code>，至于在<code>程序流</code>的哪个位置上是不管的。</p>
<p>因此在第四行： </p>
<ul>
<li>流敏感:  s-&gt;{“x”}, o1.f-&gt;{“y”}</li>
</ul>
<p><img src="/img/image-20211215203935009.png" alt="image-20211215203935009"></p>
<ul>
<li><p>流不敏感：</p>
<p>把程序当成无序集合， 将所有的控制流信息忽略掉。</p>
<p>因此在整个程序中，流不敏感<code>只维护一个指针集</code></p>
</li>
</ul>
<img src="img/image-20211215204252197.png" alt="image-20211215204252197" style="zoom:67%;" />

<p>所有只维护一个map, 记录程序在运行期间所有指向的对象。</p>
<p>注意由于流不敏感的分析忽略了控制流信息，因此为了保证分析结果是<code>safe</code>的，在分析到s指向o1.f后，就要把程序中所有o1.f map的对象全部传给s(保守期间)。</p>
<blockquote>
<p>! 目前没有证据在JAVA上Flow Sensitive 对 Flow Senisitive 精确许多</p>
</blockquote>
<h3 id="Analysis-Scope"><a href="#Analysis-Scope" class="headerlink" title="Analysis Scope"></a>Analysis Scope</h3><blockquote>
<p>Which parts of program should be analyzed?</p>
</blockquote>
<ul>
<li><p>全程序分析(Whole-program)</p>
</li>
<li><p>按需分析(Demand-driven)</p>
</li>
</ul>
<img src="img/image-20211215204816102.png" alt="image-20211215204816102" style="zoom:80%;" />

<p>对于如下例子:</p>
<img src="img/image-20211215205000523.png" alt="image-20211215205000523" style="zoom:67%;" />

<p>如果我们只想知道程序中第5行的call graph,那么我们只需要对变量z做指针分析就可以了。</p>
<blockquote>
<p>z-&gt;{o4}</p>
</blockquote>
<blockquote>
<p> 有时候按需分析不一定比全程序块，可能设计大量冗余计算。</p>
</blockquote>
<hr>
<h2 id="What-Do-We-Analyze"><a href="#What-Do-We-Analyze" class="headerlink" title="What Do We Analyze?"></a>What Do We Analyze?</h2><p>以下是语句不会修改指针指向的语句：</p>
<p><del>if else</del></p>
<p><del>switch case</del></p>
<p><del>for&#x2F;while&#x2F;do…while</del></p>
<p><del>break&#x2F;continue</del></p>
<p>…</p>
<p>Java当中有哪些指针：</p>
<ul>
<li>Local variable: x (数量最多)</li>
<li>Static field: C.f (与处理variable类似，有文献看作是global field)</li>
<li>Instance field: x.f (instance field是将x.f的组合看作一个指针，也是需要重点分析)</li>
<li>Array element: array[i]</li>
</ul>
<p>对于数组， 静态分析的通用做法是建模成只有一个field的object</p>
<blockquote>
<p> Ignore indexes. Modeled as an object(pointed by array) with a <code>single field</code>, say arr, which may point to any value stored in array.</p>
</blockquote>
<p><img src="/img/image-20211216194745810.png" alt="image-20211216194745810"></p>
<p>在右边的指针分析中，注意array在声明时new 无长度信息， 因为将array看作一个object, 包含唯一的field arr. 对所有下标(无视下标)都看作对这个field进行store。</p>
<p>所以，指针分析基本上就是围绕以下五条语句：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="keyword">new</span> <span class="title class_">T</span>()   <span class="comment">// New </span></span><br><span class="line">x = y <span class="comment">// Assign</span></span><br><span class="line">x.f = y <span class="comment">// Store</span></span><br><span class="line">y = x.f <span class="comment">// Load  </span></span><br><span class="line">r = x.k(a, ...)  <span class="comment">// Call </span></span><br></pre></td></tr></table></figure>



<h3 id="使用三地址码简化分析"><a href="#使用三地址码简化分析" class="headerlink" title="使用三地址码简化分析"></a>使用三地址码简化分析</h3><blockquote>
<p>Complex memory-accesses will be converted to <code>three-address code</code> by introducing temporary variables</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x.f.g.h = y;</span><br><span class="line">t1 = x.f;</span><br><span class="line">t2 = t1.g;</span><br><span class="line">t2.h = y;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/12/15/pointer-analysis/" data-id="cl1d6yih40016kjw5fr89bw8u" data-title="pointer_analysis" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-pla-dataflow" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/26/pla-dataflow/" class="article-date">
  <time class="dt-published" datetime="2021-09-26T11:22:19.000Z" itemprop="datePublished">2021-09-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/26/pla-dataflow/">Founddation Data Flow Analysis</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Data-Flow-Analysis-on-Control-Flow-Graph"><a href="#Data-Flow-Analysis-on-Control-Flow-Graph" class="headerlink" title="Data Flow Analysis on Control Flow Graph"></a>Data Flow Analysis on Control Flow Graph</h2><img src="pla-dataflow/image-20210926192419749.png" alt="image-20210926192419749" />



<ul>
<li><p>Any given node in the <code>control flow graph</code> takes some amouts of data, and then possibly join these amounts of data</p>
</li>
<li><p>Then applies a function(so called <code>transfer function</code>) that generate the output data.</p>
</li>
<li><p>In_b(<strong>in of b</strong>):  descripting the information that is avaliable when we enter the basic block b</p>
</li>
<li><p>ou_b(<strong>out of b</strong> ): using out of b as the information that we have been at the end of  the particular b.</p>
</li>
<li><p>Join of b: as the function that takes all the incomming data and merges that into in of b.</p>
<hr>
<h2 id="Characterising-Data-Flow-Analyses"><a href="#Characterising-Data-Flow-Analyses" class="headerlink" title="Characterising Data Flow Analyses"></a>Characterising Data Flow Analyses</h2></li>
</ul>
<p><img src="/pla-dataflow/image-20210927181647849.png" alt="image-20210927181647849"></p>
<ul>
<li>data flow analyses can be a <strong>Forward</strong> analyses or can also be a <strong>backward</strong> anslyses</li>
<li>we. can confirm some sort of domains-some set of values we care about-something we want to collect, we called it <strong>L</strong></li>
<li>transfer of b,  is simply going to be mapping from this analyses into the other analysis domain.</li>
<li>the join function is the function that takes two results of analysis domain merging them together into one result.</li>
</ul>
<p>We require a couple of properties to ensure the termination(L, trans, join)</p>
<p><img src="/pla-dataflow/image-20210927184108229.png" alt="image-20210927184108229"></p>
<p>To motivate that, let’s look at an example </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/26/pla-dataflow/" data-id="cl1d6yih30015kjw59n1oateg" data-title="Founddation Data Flow Analysis" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-freedo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/18/freedo/" class="article-date">
  <time class="dt-published" datetime="2021-09-18T14:56:57.000Z" itemprop="datePublished">2021-09-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/18/freedo/">论自由</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>  我觉得我比谁都热爱自由， 但是这事最不能比较， 因为一旦有比较， 其实你就不自由了。</p>
<p>  我不喜欢被任何组织约束，这一点不得不承认克氏对我影响很深。 他的”中观”思想，能够让我保持在一种不加任何评判的观察者状态。我觉得这是一件很科学的事情，最近发现其实很多学科的”科学”根基并不牢靠，或者说并没有彻底弄清楚。 但是很多上层的“赛先生”们无比执着科学这件事情，这本身就不科学，如果不能从已知中解脱，从一个客观(或者说中观)的角度去观察问题，就不科学。</p>
<p>  我本身也有许多问题要改正，比如成家这件事情。 我一想到自己会被”束缚”就浑身不自在。 但是最近突然觉得享受一个家庭带来的温馨欢乐其实也不错。 :)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/18/freedo/" data-id="cl1d6yigz000rkjw5hn5ndv1c" data-title="论自由" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-black-widow" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/29/black-widow/" class="article-date">
  <time class="dt-published" datetime="2021-08-29T12:20:59.000Z" itemprop="datePublished">2021-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/29/black-widow/">Black Widow</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="0x01-Intro"><a href="#0x01-Intro" class="headerlink" title="0x01  Intro"></a>0x01  Intro</h2><p>As the title shown that the black Widow is a blackbox data-driven web scanning. </p>
<p>This paper is  in S&amp;P 2021, to find XSS in web applications.</p>
<h2 id="0x02-Challenges"><a href="#0x02-Challenges" class="headerlink" title="0x02 Challenges"></a>0x02 Challenges</h2><p>The challenge of web application scanning mainly has three items:</p>
<ul>
<li><p><strong>Navigation:</strong> Navigation is a question how can we cover the application contents as more as possible. A web application has a lot of methods to create new content, such as links, form submissions, javascript events.  So the first order of the blackbox web scanning is navigation modeling. (Op: <em>it is a question about space</em>)</p>
</li>
<li><p><strong>Traversing:</strong> Traversing is about how to handle complex workflows in the application. The events have some trigger sequences. For example, if there is a vulnerability on the picture comment place, at first, we must need to upload a picture before.(Op: <em>it is a question about line</em>) </p>
</li>
<li><p><strong>Inter-state Dependencis:</strong> This is about where we look for our payload in the web application. For instance, when we submit some data as admin, the content may output in other pages. So how to build the inter-state dependencis is a crucial point to build a strong scanner.(Op: <em>it is a question about point</em>)</p>
</li>
</ul>
<h2 id="0x03-Previous"><a href="#0x03-Previous" class="headerlink" title="0x03 Previous"></a>0x03 Previous</h2><p>Black Widow compared with three tools: <em>jAk</em>,<em>Enemy of the State</em>, and <em>Ligre</em>. To address the above challenges, the author found that these tools are just imporving one of these methods in isolation. </p>
<ul>
<li><p><em>JAk</em> focused on exploring client-side events.(It can find sequences of events that could be exploited by deep-first fashion, but cannot extend across multiple pages)</p>
</li>
<li><p><em>Enemy of the State</em> focused on traversing server-side states(traversed with respect to state).</p>
</li>
<li><p><em>Ligre</em> used reversed engineering try to identify interestring dependencies, which towards to slove the challenge three.</p>
</li>
</ul>
<h2 id="0x04-Approach"><a href="#0x04-Approach" class="headerlink" title="0x04 Approach"></a>0x04 Approach</h2><p>Black widow’s key idea is to combine the advantages of all of these methods to handle the modern complex web applications.</p>
<img src="black-widow/image-20210829220127541.png" alt="image-20210829220127541" style="zoom:80%;" />



<h3 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h3><p>To handle navigation,  Black widow treats the <strong>nodes</strong> in the graph as <strong>client-side states</strong> and the <strong>edges</strong> between these nodes are the <strong>action</strong> needed to move between these states. So web applications can be represented as a labeled directed graph. </p>
<h4 id="a-Model-Construction"><a href="#a-Model-Construction" class="headerlink" title="a) Model Construction"></a>a) Model Construction</h4><p>Black widow start model construction from a initial URL, then retrieves the first webpage and the referenced resources. While execuing the loaded javascript, which extracts the registered Javascript events and add them to the model.</p>
<p> So the model has two kinds of states, one kind is from page(e.g., URL) and another is from javascript events(e.g., click).</p>
<p>And there are four types of actions: GET requests, form submissions, iframes and Javascript events.</p>
<h4 id="b-Extraction-of-Actions"><a href="#b-Extraction-of-Actions" class="headerlink" title="b) Extraction of Actions"></a>b) Extraction of Actions</h4><p>Black widow uses dynamic analysis approach, monitioring for call to browser APIs to register JavaScript events and modification of the DOM treee to insert tags such as forms and ahchors.</p>
<ul>
<li>use <em>JAK</em>‘s library to handle event registration hooking before loading a page.</li>
<li>Monitor DOM Modification to detect updates to the page(rescan the page).</li>
</ul>
<h4 id="C-Infinite-Crawls"><a href="#C-Infinite-Crawls" class="headerlink" title="C) Infinite Crawls"></a>C) Infinite Crawls</h4><p>To avoid infinite crawls:</p>
<ul>
<li>a set of heuristics that determine when two pages or two actions are similar.</li>
<li>a hard limit to the maximum number of “similar” actions.</li>
</ul>
<h3 id="Traversal"><a href="#Traversal" class="headerlink" title="Traversal"></a>Traversal</h3><blockquote>
<p>Traversal is describing which order actions should be performed and when to perform possibly state-changing actions.</p>
</blockquote>
<p>As we can  seen in the above figure, the blue line is a process of traverse we pick unvisited edge from the navigation graph in the order they were added.</p>
<img src="black-widow/image-20210929165046202.png" alt="image-20210929165046202 " style="zoom:80%;" />

<p>This is the function of traverse, the parameter is the edge(including: url, form, event, iframe).</p>
<p>if the current edge has a previous edge, we would iterator it and check the <code>safe</code> edge, <code>safe</code> means user can visit direct, in this work, it is just the GET method. If the edge meet safe, the loop will break and create a new navigate object which init with workflow.</p>
<p>So, in total, the goal of traversal is finding the action chains on the navigation graph.</p>
<h3 id="Inter-sate-Dependencies"><a href="#Inter-sate-Dependencies" class="headerlink" title="Inter-sate Dependencies"></a>Inter-sate Dependencies</h3><p><img src="/black-widow/image-20210929165457363.png" alt="image-20210929165457363"></p>
<h3 id="Dynamic-XSS-detection"><a href="#Dynamic-XSS-detection" class="headerlink" title="Dynamic XSS detection"></a>Dynamic XSS detection</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/08/29/black-widow/" data-id="cl1d6yigv000ikjw5b0e22382" data-title="Black Widow" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-exp" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/16/exp/" class="article-date">
  <time class="dt-published" datetime="2021-08-16T12:55:19.000Z" itemprop="datePublished">2021-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/16/exp/">教训与感悟</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li>凡事提前一点打算， 选择了拖延就选择了心灵受折磨。</li>
<li>所谓成熟，大概就是敢于对自己的行为承担后果。</li>
<li>削减做其他事情的时间只是制造时间变多了的假象，真正有效的是把自己聚起来去解决问题。</li>
<li>保持正念正思维， 把人事都往好处想。</li>
<li>把心量打开，用广阔的视角去看世界， 让自己快乐，也要让别人快乐。</li>
<li>全心全意活在当下，不念过去，不畏未来。</li>
<li>攻是最好的防， 输出是最好的输入。最好的输出方式，应该是自然地流露。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/08/16/exp/" data-id="cl1d6yigy000qkjw52tc590tn" data-title="教训与感悟" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ml-2021-2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/15/ml-2021-2/" class="article-date">
  <time class="dt-published" datetime="2021-07-15T12:15:15.000Z" itemprop="datePublished">2021-07-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/15/ml-2021-2/">台大深度学习2021-2</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://speech.ee.ntu.edu.tw/~hylee/ml/ml2021-course-data/regression%20(v16).pdf">Slides</a></p>
<p>Linear models are tooo simple, we need more sophisticated modes.</p>
<p>也许实际情况下， 我们要找的model不是一个线性函数。</p>
<img src="ml-2021-2/image-20210715204517964.png" alt="image-20210715204517964" style="zoom:67%;" />

<p>linear models 在这种情况下就cover不了实际情况(红线)，这种限制就叫做<code>Model Bias</code>。</p>
<p>如何表示一个更复杂的model：</p>
<img src="ml-2021-2/image-20210715204805102.png" alt="image-20210715204805102" style="zoom:50%;" />

<p>红色的function就可以表示为常量(constant)+蓝色function的集合。 以0表示常量位置，即初始值。 通过1，2，3三个蓝色function的叠加，每个蓝色function会影响红色的斜率变化。 </p>
<blockquote>
<p>由很多线段组成的curves, 称为piecewise linear curves</p>
</blockquote>
<p>Piecewise  linear curves 可以由常数加上一堆蓝色function组成， 如果curves的转折点越多需要的蓝色function就越多。</p>
<img src="ml-2021-2/image-20210715205221020.png" alt="image-20210715205221020" style="zoom:50%;" />



<p>如果是<code>continuous curve</code> 可以在其上取点连起来，构成piecewise linear curves, 所以：</p>
<p>我们可以用piecewise linear curve 逼近任何的曲线， 又可以用蓝色的function去组合出piecewise linear curve:</p>
<img src="ml-2021-2/image-20210715205439712.png" alt="image-20210715205439712" style="zoom:50%;" />

<p>那么接下来的重点问题是， 如何表示蓝色function?</p>
<img src="ml-2021-2/image-20210715205608267.png" alt="image-20210715205608267" style="zoom:50%;" />

<p>在这里，一种思路是使用<code>sigmoid function</code>去近似地刻画蓝色function。<br>$$<br>y &#x3D; c\frac{1}{1+e^{-(b+wx_1)}}<br>$$</p>
<p>这个function的x1趋近于无穷大， 就收敛在高度为c的地放；x1趋近于无穷小的时候就接近于零，因此就构成了上图中蓝色虚线的形状(Sigmoid)。</p>
<p>现在有了sigmoid function, 我们就可以用它来逼近蓝色实现function（<code>hard sigmoid</code>）。</p>
<p>如何趋近呢？ 就需要调整各个参数(<code>b</code>, <code>w</code>, <code>c</code>)：</p>
<img src="ml-2021-2/image-20210715210255445.png" alt="image-20210715210255445" style="zoom:50%;" />

<ul>
<li>w: Change slopes,  改坡度</li>
<li>b: shift, 左右移动</li>
<li>c: Change height ,改高度</li>
</ul>
<p>因此我可以通过改参数制造出不同的sigmoid function, 把这些sigmoid function叠起来以后，我们就可以逼近不同的Piecewise Linear的function， 然后用这些Piecewise的function 来近似各种不同的 Continuous的functions（妙啊）。</p>
<img src="ml-2021-2/image-20210802061142900.png" alt="image-20210802061142900" style="zoom:50%;" />



<p>如上图所示， 我们就有三个不同的function(0为常数量)，其公式为:<br>$$<br>y &#x3D; b + \sum_ic_isigmod(b_i+w_ix_1)<br>$$<br>其中b 是constant, 1,2,3是有斜度的三个sigmod函数，我们对其求和。</p>
<blockquote>
<p> 总结： 本来是liner model: <code>y=b+wx1</code>, 他有非常大的限制， 叫做model bias。 因此我们可以写一个更有弹性的有未知参数的function来降低model bias(上式)。</p>
</blockquote>
<img src="ml-2021-2/image-20210802061606287.png" alt="image-20210802061606287" style="zoom:50%;" />






      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/15/ml-2021-2/" data-id="cl1d6yih0000wkjw57soi37fa" data-title="台大深度学习2021-2" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-reaching-definitions" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/12/reaching-definitions/" class="article-date">
  <time class="dt-published" datetime="2021-07-12T11:22:20.000Z" itemprop="datePublished">2021-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/12/reaching-definitions/">reaching_definitions</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="0x01-Bit-Vector-Program"><a href="#0x01-Bit-Vector-Program" class="headerlink" title="0x01 Bit-Vector Program"></a>0x01 Bit-Vector Program</h1><p><code>Reaching Definitions analysis</code>  aims at finding out for each node of a program graph where a variable or array might have been previously defined(or modified) the last time. It is a kind of <code>bit vector problem</code>.  </p>
<img src="reaching-definitions/image-20210712192406787.png" alt="image-20210712192406787" style="zoom:40%;" />

<p>As shown in the Figure 2.1, we can see that the node <code>q1</code> there are two possibilities for the variable <code>y</code>, either it was modified using the action from <code>q_start</code> to <code>q1</code>, or the action <code>q3</code> to <code>q1</code>.</p>
<p>For the variables <code>x</code> there are also two possibilities: either the action from <code>q3</code> to <code>q1</code>, or it has not been modified at all and hence it  has <code>retained its original value</code>.</p>
<h2 id="Analysis-assignments"><a href="#Analysis-assignments" class="headerlink" title="Analysis assignments"></a>Analysis assignments</h2><ul>
<li><p>Variable: <img src="/reaching-definitions/image-20210715191536593.png" alt="image-20210715191536593"></p>
</li>
<li><p>Array: <img src="/reaching-definitions/image-20210715191551279.png" alt="image-20210715191551279"></p>
</li>
</ul>
<p>the q means a program point on the graph Q. and there has an edge with an action \alpha:  <img src="/reaching-definitions/image-20210715191717541.png" alt="image-20210715191717541"></p>
<p>so the variable y in the Figure 2.1 can be represented as the triple: </p>
<p> <img src="/reaching-definitions/image-20210715191939568.png" alt="image-20210715191939568">: y is modified by the action labelling the edge from q2 to q3.<img src="/reaching-definitions/image-20210715192150692.png" alt="image-20210715192150692"></p>
<p>: symbol ‘?’ means retaining its initial value.</p>
<img src="reaching-definitions/image-20210715192357776.png" alt="image-20210715192357776" style="zoom:60%;" />









<h2 id="What-is-defined-on-a-path"><a href="#What-is-defined-on-a-path" class="headerlink" title="What is defined on a path"></a>What is defined on a path</h2><h2 id="Constraints-for-Reaching-Definitions"><a href="#Constraints-for-Reaching-Definitions" class="headerlink" title="Constraints for Reaching Definitions"></a>Constraints for Reaching Definitions</h2><h2 id="Solving-the-constraints"><a href="#Solving-the-constraints" class="headerlink" title="Solving the constraints"></a>Solving the constraints</h2><h2 id="Solutions-summarise-the-path"><a href="#Solutions-summarise-the-path" class="headerlink" title="Solutions summarise the path"></a>Solutions summarise the path</h2><h1 id="0x02-Montone-Framework"><a href="#0x02-Montone-Framework" class="headerlink" title="0x02 Montone Framework"></a>0x02 Montone Framework</h1><h1 id="0x03-Datalog-Based-Analyses"><a href="#0x03-Datalog-Based-Analyses" class="headerlink" title="0x03 Datalog Based Analyses"></a>0x03 Datalog Based Analyses</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/12/reaching-definitions/" data-id="cl1d6yih5001bkjw5ggqchkt2" data-title="reaching_definitions" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-CSAPP-5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/09/CSAPP-5/" class="article-date">
  <time class="dt-published" datetime="2021-07-09T10:37:17.000Z" itemprop="datePublished">2021-07-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/09/CSAPP-5/">Machine-Level Programming 1 - Basics</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>重刷，顺便练英文</p>
<ol>
<li><p>C, assembly, machine code</p>
</li>
<li><p>Assembly Basics: Registers, opeerands, move</p>
</li>
<li><p>Arithmetic &amp; logical operations</p>
</li>
</ol>
<ul>
<li><p>X86:</p>
<blockquote>
<p>X86 is sort of a colloquial term for intel processors, as the first one was called the 8086, and then 8286, 8386.. So called x86.</p>
</blockquote>
<img src="CSAPP-5/image-20210709191919855.png" alt="image-20210709191919855" style="zoom:40%;" /></li>
</ul>
<ul>
<li><p>broadwell model</p>
<img src="CSAPP-5/image-20210709192517170.png" alt="image-20210709192517170" style="zoom:60%;" /></li>
</ul>
<p>4 cores a serious standard desktop model, eight first a server class machine.</p>
<h2 id="0x01-C-assembly-machine-code"><a href="#0x01-C-assembly-machine-code" class="headerlink" title="0x01 C, assembly, machine code"></a>0x01 C, assembly, machine code</h2><ul>
<li>Arhchitecture(ISA: instruction set architecture)</li>
</ul>
<p>The hardware design people have figured out all kinds of ways to implement instructions. Some of them are fast but take a lot of hardware, some are contrary. So they managed to create this abstraction that’s called the <code>instruction set architecure</code>, which is what the target of a <code>compile</code> should be.</p>
<ul>
<li><p>Microachitecture: Implementation of the architecture(about hardware)</p>
</li>
<li><p>Code Forms:</p>
<ul>
<li>Machine Code: The byte-level programs that a processor executes</li>
<li>Assembly Code: A text representation of machine code</li>
</ul>
</li>
</ul>
<p>So,You can think of from instruction set point of view: </p>
<ul>
<li>Example ISAs: <ul>
<li>Intel: x86, IA32, Itanium, x86-64</li>
<li>ARM:  used in almost all mobile phones</li>
</ul>
</li>
</ul>
<h3 id="Assembly-x2F-Machine-Code-View"><a href="#Assembly-x2F-Machine-Code-View" class="headerlink" title="Assembly&#x2F;Machine Code View"></a>Assembly&#x2F;Machine Code View</h3><img src="CSAPP-5/image-20210709194510894.png" alt="image-20210709194510894" style="zoom:60%;" />

<img src="CSAPP-5/image-20210709195524486.png" alt="image-20210709195524486 " style="zoom:50%;" />

<p>There are some visible parts of the instruction of the machine state; then you can examine and test and operate on and you must in fact.  In particular, there are some sort of program counters to tell you what address is the instructino that you are going to execute next, where is the localtion memroy. </p>
<p>And then there is a set of registers which are part of that the programmer actually makes use of, and you actually give then by name as specifically. </p>
<p>The other set of states (just a few bits of states ) that talked about what are the results of some recent instructions, where they did it produce a value of 0, did it produce a negative or a positive value.</p>
<p>So that is the sort of the processor and the the other part of is the memory.</p>
<p>The memory is what you can think of  logically as just an <code>array of bytes</code>. That’s what the machine level programmer sees. It’s actually kind of a ficition in different ways as I mentioned before. There is sort of a collaboration between the operating system and the hardware. What we call <code>vitual memory</code> to make it looks like each program running on the process has its own independent <code>array of bytes</code> that it can acces.</p>
<h3 id="Turning-C-into-Object-Code"><a href="#Turning-C-into-Object-Code" class="headerlink" title="Turning C into Object Code"></a>Turning C into Object Code</h3><p><img src="/CSAPP-5/image-20210709200927134.png" alt="image-20210709200927134"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/09/CSAPP-5/" data-id="cl1d6yign0003kjw518wz7dfb" data-title="Machine-Level Programming 1 - Basics" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ml-2021-1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/07/ml-2021-1/" class="article-date">
  <time class="dt-published" datetime="2021-07-07T12:28:37.000Z" itemprop="datePublished">2021-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/07/ml-2021-1/">台大深度学习2021-1</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>从上次南大静态分析搞完之后，就说博客再也不写学习笔记了。 于是，我就很久没有更新了…</p>
<p>算了， 还是把博客搞成学习笔记本好了…xD</p>
<p>李宏毅老师的机器学习课程非常的棒，我一定要好好学习….</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>对于机器学习可以理解成：</p>
<p><img src="/ml-2021-1/image-20210707203503647.png" alt="image-20210707203503647"></p>
<p>其实就是约等于一个找函数的能力， 如：</p>
<ul>
<li><p>语音辨识(Image Recognition)：</p>
<img src="ml-2021-1/image-20210707203601984.png" alt="image-20210707203601984" style="zoom:80%;" /></li>
</ul>
<p>这里的声音信号做为输入， 而对应的文字作为输出。 这种函数会非常的复杂， 因此我们期望通过机器把它找出来。</p>
<ul>
<li><p>图像识别(Image Recognition):</p>
<img src="ml-2021-1/image-20210707203916147.png" alt="image-20210707203916147" style="zoom:80%;" /></li>
</ul>
<p>同理图像识别图片是输入，输出是图片的内容。</p>
<p>等等…</p>
<hr>
<h3 id="专有名词介绍"><a href="#专有名词介绍" class="headerlink" title="专有名词介绍"></a>专有名词介绍</h3><ul>
<li><p><code>Regression</code>: The function outputs a scalar.</p>
<img src="ml-2021-1/image-20210707204151325.png" alt="image-20210707204151325" style="zoom:80%;" /></li>
</ul>
<p> 如上图所示，是一个回归(Regression)任务，此函数输入是今天已知的与输出有关的各种参数， 输出是对于明天PM2.5指数的预测。</p>
<ul>
<li><code>Classification</code>: Given options(classes), the function outputs the correct one.</li>
</ul>
<p>Classification是做选择题:</p>
<img src="ml-2021-1/image-20210707204729572.png" alt="image-20210707204729572" style="zoom:80%;" />

<p>如上图，一个函数帮我们甄别是否一封邮件是垃圾邮件。他的输入就是一封电子邮件，输出是一个选项(选项是提前设定好的)。 选项可以有多个， 如:</p>
<img src="ml-2021-1/image-20210707205158308.png" alt="image-20210707205158308" style="zoom:50%;" />

<p>Playing Go 也是一个Classification, 他有19*19(棋盘大小)个选项。</p>
<ul>
<li>Structured Learning: 除了Regression和Classification以外，如机器不止是产生一个数字或者做一个选择题。 他需要Create something with structure(e.g., image, document)，那么就称为Structured Learning（让机器学会创造）</li>
</ul>
<hr>
<h2 id="Case-Study"><a href="#Case-Study" class="headerlink" title="Case Study"></a>Case Study</h2><p>来直观的看一下如何通过机器学习解决问题。</p>
<p>老师的YouTube地址: <a target="_blank" rel="noopener" href="https://www.youtube.com/c/HungyiLeeNTU">https://www.youtube.com/c/HungyiLeeNTU</a></p>
<img src="ml-2021-1/image-20210707205846249.png" alt="image-20210707205846249" style="zoom:50%;" />

<p>后台记录了每一天的观看人数等数据。 现在， 老师想找到一个function，他能够帮我们预测今天有多少人会观看老师的频道。 机器学习找这个function，需要三个步骤：</p>
<h3 id="1-Function-with-unknown-parameters"><a href="#1-Function-with-unknown-parameters" class="headerlink" title="1. Function with unknown parameters"></a>1. Function with unknown parameters</h3><p>写出一个带有<code>未知参数(unknow parameters)</code>的函数:</p>
<img src="ml-2021-1/image-20210707210146306.png" alt="image-20210707210146306" style="zoom:100%;" />

<p>我们来猜测一下， 我们要找的数学式是:<br>$$<br>y &#x3D; b+wx_1<br>$$<br>这个带有unknown parameters的函数我们就称为模型(Model)。</p>
<p>其中<code>y</code>是我们所需要的预测的，当天观看频道的总人数。 而<code>x1</code>是我们输入的，已知的昨天观看该频道的人数。</p>
<p>而<code>b</code>和<code>w</code>就是unknow parameters。其中<code>b</code>定义为<code>bias</code>， 而<code>w</code>定义为<code>weight</code>。</p>
<p>这个model不一定是对的，等下会有修正。</p>
<h2 id="2-Define-Loss-from-Training-Data"><a href="#2-Define-Loss-from-Training-Data" class="headerlink" title="2. Define Loss from Training Data"></a>2. Define Loss from Training Data</h2><p>第二步骤， 定义一个Loss Function:<br>$$<br>L(b, w)<br>$$<br>L的输入就是我们model里的参数<code>b</code>跟<code>w</code>;  输出是一个代表了model使用改组参数的好坏。</p>
<p>假设现在设置:<br>$$<br>L(0.5k, 1)<br>$$<br>那么我们的model就变为：<br>$$<br>y &#x3D; b+ wx_1 \rightarrow y&#x3D;0.5k +1x_1<br>$$<br>那么如何衡量目前这个已定参数的model有多好呢？就需要使用Loss Function。</p>
<p>我们需要从训练资料中找答案：</p>
<img src="ml-2021-1/image-20210708204015376.png" alt="image-20210708204015376" style="zoom:30%;" />



<p>如上图中， 使用我们已定的model去计算已知的，从2017&#x2F;01&#x2F;01到2020&#x2F;12&#x2F;30日的数据。 我们都可以将每一天的数值带入model， 得到隔天的估测数据，然后计算与真实值的误差来衡量model:<br>$$<br>e_2 &#x3D; \vert y-\hat{y}\vert &#x3D; 2.1k<br>$$</p>
<blockquote>
<p>每一天的真实数值就叫做Label</p>
</blockquote>
<p>如e2代表我们对2017&#x2F;01&#x2F;02的估值。 我们可以依次算出三年的训练资料的误差：</p>
<img src="ml-2021-1/image-20210708205313401.png" alt="image-20210708205313401" style="zoom:20%;" />

<p>这个L越大效果越差， 越小效果越小。</p>
<p>这种依据绝对值求Loss的方法叫做<code>MAE</code>, 而使用平方和求Loss的方法叫做<code>MSE</code>:</p>
<img src="ml-2021-1/image-20210708205441134.png" alt="image-20210708205441134" style="zoom:25%;" />



<p>两种求误差的方法根据需求选择。</p>
<img src="ml-2021-1/image-20210708205619696.png" alt="image-20210708205619696" style="zoom:30%;" />



<p>经过作者对Model进行一系列的调参后的真实结果， 在穷举各种<code>w</code>和<code>b</code>后，使用真实数据计算出来的Loss结果。各种组合的Loss表示为上边的等高线图，越偏红色， 表示计算出的Loss越大， <code>w</code>跟<code>b</code>放入mdoel，效果越差。可以看到估测最准的大约在<code>w</code>在1，b在100左右。</p>
<h2 id="3-Optimization"><a href="#3-Optimization" class="headerlink" title="3. Optimization"></a>3. Optimization</h2><p> 第三步是解一个最佳化的问题， 找到一组最好的<code>w</code>跟<code>b</code>(<code>w*</code>, <code> b*</code>)，可以让Loss的值最小 ：</p>
<img src="ml-2021-1/image-20210709202254891.png" alt="image-20210709202254891" style="zoom:25%;" />



<p>此门课程中唯一用到的Optimization方法是<code>Gradient Descent</code>。</p>
<p>上大图：</p>
<img src="ml-2021-1/image-20210709202351925.png" alt="image-20210709202351925" style="zoom:50%;" />

<p>如图， 为了简化期间， 假设我们已知参数<code>b</code>, 只有一个参数<code>w</code>未知。 当<code>w</code>在不同的数值的时候， 就会得到不同的Loss, 由于简化为只有一个参数， 所以是一条曲线(1D)。</p>
<p>现在的问题是， 如何找到一个<code>w</code>， 使得<code>Loss</code>的值最小?</p>
<p>首先， 我们随机选择一个随机的点<code>w0</code>。 接下来计算， 当<code>w=w0</code>时， <code>w</code>这个参数对<code>L</code>的微分。 即使计算<code>w0</code>点的<code>error surface</code>的切线斜率。如果是<code>Negative </code>就<code>Increase w</code>, 反之。</p>
<p>如图就是猴子哥现在的位置。猴子哥站在那里， 看到左高右低，就向右<code>Increase w</code>。</p>
<img src="ml-2021-1/image-20210709203107456.png" alt="image-20210709203107456" style="zoom:50%;" />

<p>再来一张图，此时猴子哥移动了一段位置，由<code>w0</code>到了<code>w1</code>, 这段距离还依赖于一个参数<code>η</code>, 这个参数是认为设定的<code>learning rate</code>。</p>
<blockquote>
<p>在机器学习中， 自己设定的值，就叫做hyperparameters</p>
</blockquote>
<p>继续反复操作， 最后停下了： 两种情况下停下了: 1)到上限了(hyperparameters)  2)   到达极值点</p>
<img src="ml-2021-1/image-20210709203845841.png" alt="image-20210709203845841" style="zoom:50%;" />

<p>如图假设我们移动到了<code>Local minima</code>的位置停止了， 那么， 我们其实没有到达真正最好的， 可以让<code>Loss</code>最小的<code>w</code>(global minima)。但是实际上，这是一个假问题(不是实际中真正的痛点)。</p>
<p>以上例子只有一个参数<code>w</code>。 那么有<code>w</code>, 跟<code>b</code>如何做<code>Gradient Descent</code>呢？</p>
<ul>
<li><p>给定随机初始值 <code>w0</code>, <code>b0</code></p>
</li>
<li><p>分别在初始位置计算<code>w</code>和<code>b</code>对<code>L</code>的微分</p>
</li>
<li><p>更新<code>w</code>跟<code>b</code>，得到<code>w1</code>跟<code>b1</code> </p>
<img src="ml-2021-1/image-20210709204432226.png" alt="image-20210709204432226" style="zoom:33%;" />


</li>
<li><p>迭代更新， 找到<code>w*</code>跟<code>b*</code></p>
</li>
</ul>
<img src="ml-2021-1/image-20210709204603236.png" alt="image-20210709204603236" style="zoom:50%;" />

<p>将<code>w</code>跟<code>b</code>结合起来，得到箭头的方向，一直移动…</p>
<p>算出来的<code>w*=0.97</code>, <code>b*=0.1k</code> , <code>Loss=0.48K</code>(观看误差大约500人)。</p>
<p>我们以上的三个步骤， 叫做训练。 我们真正要做的是， 对未来的未知的观看次数的预测。</p>
<img src="ml-2021-1/image-20210709204838642.png" alt="image-20210709204838642" style="zoom:50%;" />



<p>如图我们发现在2021的误差值是0.58。因此在位置的数据上， 误差相对较大。</p>
<p>如何再缩小误差， 分析结果：</p>
<img src="ml-2021-1/image-20210709205158675.png" alt="image-20210709205158675" style="zoom:50%;" />

<p>蓝色的线几乎是红色向右平移，因为这个model只参考前一天的结果。 找规律， 发现有<code>每七天一个循环</code>，也许使用一个参考7天的model结果会更准确。修改模型</p>
<blockquote>
<p>对模型的修改往往来自于对问题的理解(Domain Knowledge)</p>
</blockquote>
<img src="ml-2021-1/image-20210709205554126.png" alt="image-20210709205554126" style="zoom:33%;" />

<p>第二个模型，将7天的数据，都列入考虑。我们得到了一个更低的<code>Loss</code>（0.38k）。这个模型中计算了前七天的<code>wjxj</code>, 每一个<code>w</code>跟<code>b</code>都用Gradient Descent计算，来看每一天的<code>w*</code>，让<code>L</code>减小的是<code>w2, w4, w5</code>为负值。</p>
<img src="ml-2021-1/image-20210709205750727.png" alt="image-20210709205750727" style="zoom:50%;" /> 

<p>以此类推考虑更多天…28天…56天…<code>Loss</code>在没有看过的资料上还是<code>0.46k</code>。</p>
<p>这种将x(feature)乘上一个weight, 再加上bias得到预测结果的模型， 叫做<code>Linear models</code>。</p>
<p>下一讲介绍如何将linear model做到更好。 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/07/ml-2021-1/" data-id="cl1d6yih0000vkjw5gyutfer4" data-title="台大深度学习2021-1" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/" rel="tag">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pl/" rel="tag">pl</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/paper/" style="font-size: 15px;">paper</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/pl/" style="font-size: 20px;">pl</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/24/web/">Web应用系中注入类漏洞调研</a>
          </li>
        
          <li>
            <a href="/2022/02/18/data-mining/">data_mining</a>
          </li>
        
          <li>
            <a href="/2022/02/14/pop/">A Survey about PHP Object Injection</a>
          </li>
        
          <li>
            <a href="/2022/02/06/logic-machine/">Logic Machine</a>
          </li>
        
          <li>
            <a href="/2022/01/26/fuz/">Fuzzing</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 iohex<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>