<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>南大静态分析-3 | Penlab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="03 Data Flow Analysis I课程链接   Overiew of Data Flow Analysis  12:05  Preliminaries of Data Flow Analysis 23:10  Notations for Transfer Function’s Constraints   Notations for Control Flows’s Constraints">
<meta property="og:type" content="article">
<meta property="og:title" content="南大静态分析-3">
<meta property="og:url" content="http://example.com/2020/05/05/static-analysis-3/index.html">
<meta property="og:site_name" content="Penlab">
<meta property="og:description" content="03 Data Flow Analysis I课程链接   Overiew of Data Flow Analysis  12:05  Preliminaries of Data Flow Analysis 23:10  Notations for Transfer Function’s Constraints   Notations for Control Flows’s Constraints">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.10.09.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/image-20210712194843394.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/image-20210714194847170.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%888.47.16.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%888.50.48.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%889.02.42.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%889.06.40.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-06%20%E4%B8%8B%E5%8D%888.46.49.png">
<meta property="og:image" content="https://penlab-1252869057.cos.ap-beijing.myqcloud.com/2020-05-06-124827.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-06%20%E4%B8%8B%E5%8D%888.50.46.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.19.56.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.23.31.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.35.26.png">
<meta property="og:image" content="http://example.com/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.34.19.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.04.45.png">
<meta property="og:image" content="http://example.com/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.07.26.png">
<meta property="og:image" content="http://example.com/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.11.36.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.18.53.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.22.47.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.11.28.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.10.53.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/image-20210714204736937.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.28.22.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.31.00.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.32.26.png">
<meta property="og:image" content="http://example.com/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.35.09.png">
<meta property="og:image" content="http://example.com/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.35.56.png">
<meta property="og:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.44.19.png">
<meta property="article:published_time" content="2020-05-05T10:08:09.000Z">
<meta property="article:modified_time" content="2022-03-30T06:25:22.936Z">
<meta property="article:author" content="iohex">
<meta property="article:tag" content="pl">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2020/05/05/static-analysis-3/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.10.09.png">
  
    <link rel="alternate" href="/atom.xml" title="Penlab" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Penlab</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-static-analysis-3" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/05/05/static-analysis-3/" class="article-date">
  <time class="dt-published" datetime="2020-05-05T10:08:09.000Z" itemprop="datePublished">2020-05-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      南大静态分析-3
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="03-Data-Flow-Analysis-I"><a href="#03-Data-Flow-Analysis-I" class="headerlink" title="03 Data Flow Analysis I"></a>03 Data Flow Analysis I</h1><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1oE411K79d">课程链接</a></p>
<blockquote>
<ol>
<li><p>Overiew of Data Flow Analysis  12:05</p>
</li>
<li><p>Preliminaries of Data Flow Analysis 23:10</p>
<ol>
<li>Notations for Transfer Function’s Constraints  </li>
<li>Notations for Control Flows’s Constraints 34:40</li>
</ol>
</li>
<li><p>Reaching Definitions Analysis 39:10</p>
<ol>
<li>Issues Not Covered 41:30</li>
<li>Reaching Definitions 44:25</li>
<li>Understanding Reaching Definitions(Transfer Function&amp;Control Flow) 58:00</li>
<li>Algorithm of Reaching Definitions Analysis 1:04:00</li>
<li>举个栗子🌰：1:12:00</li>
</ol>
</li>
</ol>
</blockquote>
<h1 id="0x01-Data-Flow-Analysis-How-data-flows-on-CFG"><a href="#0x01-Data-Flow-Analysis-How-data-flows-on-CFG" class="headerlink" title="0x01 Data Flow Analysis(How data flows on CFG)"></a>0x01 Data Flow Analysis(How data flows on CFG)</h1><p>数据流分析，描述的是<code>How Data Flows on CFG(数据在控制流上的传递情况)</code>。</p>
<p>什么样的DATA: <code>application-specific Data</code>。</p>
<p>Flow：</p>
<p>即在不同场景的数据流分析需要关注的数据抽象(data abstraction)不同，其安全策略也不同(flow safe-approximation strategies)， 那么根据安全策略，也会制定相应的转化函数(transfer functions)和边(control-flow handlings)。</p>
<p>Analysis:</p>
<blockquote>
<p>May analysis:  outputs information that may be true (over-approximation). 可能的都报出来</p>
<p>Must analysis: outputs information that must be true (under-approximation). 报出来的必须对</p>
<p>两者应用于不同场景，都是为了结果是正确的。以结果的正确为目的，称之为safe-approximation。</p>
</blockquote>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.10.09.png" alt="截屏2020-05-09 下午5.10.09 " style="zoom:90%;" />

<p>所以对于数据流分析来说：</p>
<img src="static-analysis-3/image-20210712194843394.png" alt="image-20210712194843394" style="zoom:50%;" />

<p>不同的数据流分析应用， 关注的data就不同，其safe-approximation策略就不同(transfer functions 和control-flow handlings不同)。</p>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><img src="static-analysis-3/image-20210714194847170.png" alt="image-20210714194847170" style="zoom:50%;" />

<p>数据流分析就是<code>application-specific Data</code>(不同的数据抽象策略)，如何在CFG上(<code>a program</code>)沿着点(<code>Transfer function</code>)和Edges(<code>control flows</code>)流动的评估(<code>safe-approximation</code>)</p>
<h1 id="0x02-Prelimiaries-of-Data-Flow-Analysis"><a href="#0x02-Prelimiaries-of-Data-Flow-Analysis" class="headerlink" title="0x02 Prelimiaries of Data Flow Analysis"></a>0x02 Prelimiaries of Data Flow Analysis</h1><h2 id="Input-and-Output-States"><a href="#Input-and-Output-States" class="headerlink" title="Input and Output States"></a>Input and Output States</h2><p>控制流图上无非有三种情形： 顺序、 分支、汇聚。 要在控制流分析数据，需要了然数据在控制流上的传递情况。那么数据如何变化的呢。</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%888.47.16.png" alt="截屏2020-05-05 下午8.47.16 " style="zoom:50%;" />

<p>一条statement, 执行前的状态是<code>IN[s1]</code>， 执行后的状态是 <code>OUT[s1]</code>。</p>
<p>顺序执行，s2的input就是s1的output。</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%888.50.48.png" alt="截屏2020-05-05 下午8.50.48 " style="zoom:50%;" />



<p>分流、汇聚依然如此，注意汇聚点有一个meet符号<code>^</code>(数据结合)。 这样每一句statement执行前就是<code>input state</code> 执行后就相当于new了一个 <code>output state</code>。而每一个<code>state</code>都与一个<code>program point</code>相关，这里的<code>program point</code>通常指的就是这条statement的上一条(before)和下一条(after)语句。</p>
<p>根据<code>program point </code>的概念， 可以做如下定义：</p>
<blockquote>
<p>In each data-flow analysis application, we associate with every program point a <code>data-flow value</code> that represents an <code>abstraction</code> of the set of all possible <code>program states</code> that can be observed for thatå point.</p>
</blockquote>
<p>就是说对每一条statement的前后program point ，会关联一个数据流的值，这个值代表program states 在这一点的所有抽象，即在这一program point上所有可能的出现状态。</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%889.02.42.png" alt="截屏2020-05-05 下午9.02.42 " style="zoom:50%;" />

<p>拿第一节探测每一个变量的check做例子，要探测每一个program point 上的program states。我们先抽象出我们关注的data， 即变量的符号。 因此将 code中的数据抽象成符号，形成一个值域，即根据应用场景，对数据所有可能的状态做的抽象集(Domain)：</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-05%20%E4%B8%8B%E5%8D%889.06.40.png" alt="截屏2020-05-05 下午9.06.40 " style="zoom:50%;" />

<p>Data-flow Analysis:</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-06%20%E4%B8%8B%E5%8D%888.46.49.png" alt="截屏2020-05-06 下午8.46.49 " style="zoom:50%;" />

<ul>
<li>Dataflow analysis 就是对程序中所有的statements的input point和output point关联一个dataflow value, 这个solution通过解析一系列的<code>safe-approximation-deriected constraints</code>(约束规则)。约束规则基于：1. semantics of statements（转化函数） 2. flows of control(控制流信息)</li>
</ul>
<h2 id="Transfer-Function’s-constraints"><a href="#Transfer-Function’s-constraints" class="headerlink" title="Transfer Function’s constraints"></a>Transfer Function’s constraints</h2><img src="https://penlab-1252869057.cos.ap-beijing.myqcloud.com/2020-05-06-124827.png" alt="截屏2020-05-06 下午8.48.18 " style="zoom:50%;" />

<p>如图一个前向分析中， transfer function 的定义就是将In这一program point 的state转化为out点的state。就是上图定义中的第一条，根据抽象的数据，对program point进行状态的转移。</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-06%20%E4%B8%8B%E5%8D%888.50.46.png" alt="截屏2020-05-06 下午8.50.46 " style="zoom:50%;" />

<p>逆向分析，有的分析也会把整个控制流图反着建立， 然后在上边顺着做数据流分析。 正常的逆向数据流分析都是沿着CFG做反方向分析。</p>
<h2 id="Control-Flow’s-Constraints"><a href="#Control-Flow’s-Constraints" class="headerlink" title="Control Flow’s Constraints"></a>Control Flow’s Constraints</h2><p>程序中的很多statements可以阻止成一个Basic Block， 那么Control Flow’s constraints 就可以分为BB内和BB外。</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.19.56.png" alt="截屏2020-05-09 下午5.19.56 " style="zoom:60%;" />



<p>Within a BB: 的话没有分支， 那么就是顺序执行，每个stmt的 in就是上一个stmt的out。</p>
<p>Among BBs: 进入状态是s1的状态， 出状态就是sn的状态。</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.23.31.png" alt="截屏2020-05-09 下午5.23.31 " style="zoom:50%;" />



<p>定义正向、反向的BBs间的Control Flow’s Constraints。正反各有两条，第一条是定义出口， 正向为例。OUT[B]是出口， fb这个从右往左，依次连接基本块内每一条语句的转换函数(注意transfer functions时从右往左连接)。得到出口处的转化规则fb，以IN[B]为参数即可。而第二条则是定义入口， 入口处分支汇合的情况，因此我们需要^上这些OUT[P]。逆向反着来，同样的原理。</p>
<h1 id="0x03-Reaching-Definitions-Analysis"><a href="#0x03-Reaching-Definitions-Analysis" class="headerlink" title="0x03 Reaching Definitions Analysis"></a>0x03 Reaching Definitions Analysis</h1><img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.35.26.png" alt="截屏2020-05-09 下午5.35.26 " style="zoom:80%;" />

<p>Reaching Definitions, 即一个definitions在传播路径上能不能reaches到某一点。 </p>
<p><img src="/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%885.34.19.png" alt="截屏2020-05-09 下午5.34.19"></p>
<p>一条reaching definition满足三点：</p>
<ol>
<li>路径上有一个point p, 定义了v</li>
<li>p有一条路径流向q</li>
<li>改路径上， v没有被重新定义</li>
</ol>
<blockquote>
<p>Reaching Definitions 是一个may analysis, 定义上没有说must, 那就是over-approximation。</p>
</blockquote>
<p>关注的数据是-&gt; definitions</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.04.45.png" alt="截屏2020-05-09 下午8.04.45 " style="zoom:50%;" />

<p>假设程序中有100个definitions，抽象为100个比特位。</p>
<p>有了抽象，我们就要有每一个program point 的状态规则，设计transfer Function，继而设计control flow。</p>
<blockquote>
<p>制定通常先给出一条语句为例,对其进行<code>safe-approximation</code></p>
</blockquote>
<p>先看transfer function</p>
<p><img src="/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.07.26.png" alt="截屏2020-05-09 下午8.07.26"></p>
<p>这是一条<code>definition</code>，这句话的语义要从<code>definitnion</code>的角度去看。我们去指定trasferì  function , 使得这一条语句之前的program point状态IN转化为OUT。</p>
<p><img src="/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.11.36.png" alt="截屏2020-05-09 下午8.11.36"></p>
<p>假设这个B块中只有这一条statement， 那么这个B的转化函数就是如上定义。</p>
<ul>
<li>“generates” a definition D of variable v</li>
<li>“kills” all the other definitions in the program that define variable v</li>
<li>while leaving the remaining incoming definitions unaffected（不kill的）</li>
</ul>
<p>举个例子：</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.18.53.png" alt="截屏2020-05-09 下午8.18.53 " style="zoom:50%;" />

 

<p>B1中有三个definitions, genB1 &#x3D; {d1, d2, d3}。 三个变量i, j, a，那么 killB1 &#x3D; {d4, d5, d6, d7}即是其他定义了i,j,a的地方。以此类推。</p>
<p>接着再来看Control Flow</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%888.22.47.png" alt="截屏2020-05-09 下午8.22.47 " style="zoom:50%;" />

<ul>
<li>因为我们是一个may analysis， 所以用Union 把所有的Path都考虑到。</li>
<li>顺序执行，因此是predecessor前趋。考虑所有INB的前趋。</li>
</ul>
<blockquote>
<p>一个数据流分析， 有了抽象，制定了transfer function和control flow设计。下一步设计算法</p>
</blockquote>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.11.28.png" alt="截屏2020-05-09 下午9.11.28 " style="zoom:60%;" />

<ul>
<li>问题 ：<ol>
<li>为什么 OUT[entry] &#x3D; 空 （entry没有statement）</li>
<li>为什么B\entry （有些算法边界设置有可能不为空（这是一个算法通用模版））</li>
<li>迭代条件<code>changes to any OUT occur</code> 能停吗？（In不变了，Out也不变了(后说明)）</li>
</ol>
</li>
<li>例子</li>
</ul>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.10.53.png" alt="截屏2020-05-09 下午9.10.53 " style="zoom:50%;" />



<p>第一轮迭代：</p>
<img src="static-analysis-3/image-20210714204736937.png" alt="image-20210714204736937" style="zoom:50%;" />

<ol>
<li><p>左上角是我们设计的数据抽象，表示definitions的状态。</p>
</li>
<li><p>在每一个out点都会初始化这个状态抽象， 为空</p>
</li>
<li><p>左下角是我们的transfer function 形式化描述。 </p>
</li>
<li><p>根据transfer function开始第一轮迭代。(合并IN-&gt;加入新的d efinition-&gt;删除其他相同变量definition定义的位置)</p>
</li>
<li><p>如果有任何一个OUT变化了，继续迭代</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.28.22.png" alt="截屏2020-05-09 下午9.28.22 " style="zoom:50%;" />

<p>（上一轮OUT即初始化0000 0000）</p>
</li>
</ol>
<p>第二轮迭代：</p>
   <img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.31.00.png" alt="截屏2020-05-09 下午9.31.00 " style="zoom:50%;" />

<p>可以看到高亮处， B2,B3的OUT变了。所以依据算法，还要迭代。</p>
<p>第三轮：</p>
<img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.32.26.png" alt="截屏2020-05-09 下午9.32.26 " style="zoom:50%;" />

<p>OUT没有变，得到结果</p>
<blockquote>
<p>输入一样的， 输出也是一样的</p>
</blockquote>
<p>所以可以看出： 每一个<code>program point</code>最后都会关联一个<code>data-flow value</code>，这个<code>data-flow value</code>就是在这一点观察到的状态上的<code>抽象</code>。</p>
<ul>
<li>Data Abstraction: 一个definition 能否reach</li>
</ul>
<p><img src="/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.35.09.png" alt="截屏2020-05-09 下午9.35.09"></p>
<p>如何得到这个状态：</p>
<p><img src="/static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.35.56.png" alt="截屏2020-05-09 下午9.35.56"></p>
<p>迭代数据流分析就是不停的迭代<code>directed constraints</code>(transfer functin 和 control flow handling)，直到停止找到solutaion。</p>
<h2 id="算法为什么会停"><a href="#算法为什么会停" class="headerlink" title="算法为什么会停"></a>算法为什么会停</h2><img src="static-analysis-3/%E6%88%AA%E5%B1%8F2020-05-09%20%E4%B8%8B%E5%8D%889.44.19.png" alt="截屏2020-05-09 下午9.44.19 " style="zoom:50%;" />

<p>改算法最重要的部分，就是他的transfer function, 其由四部分组成:</p>
<ul>
<li>输入: IN[S]</li>
<li>输出: OUT[S]</li>
<li>kill_s</li>
<li>gen_s</li>
</ul>
<p>这里，由于gen和kill都是由statement的性质决定的， 所以statement集合定了，gen和kill的动作就定了。 </p>
<p>而变化的就是IN和OUT了。 如果一轮迭代中，IN新加入了内容(more facts)，这些新的内容流入S后只有两种结果： 1. 被kill了 2. survivor存活了。 那么存活的内容就会被加入到OUT中。</p>
<p><code>而OUT，不会变小了</code>, 感觉这是理解的关键，因为如果进入了out, 就证明没有被kill掉，而每一轮kill的都是相同的内容。那么既然这一轮survivor了，那么就不会再被kill掉了。 所以<code>OUT不会缩小， 只会变大</code>。</p>
<p>那么在迭代数据流中， 每一个<code>OUT都没有变化，算法就停止了</code>， 可以看到OUT就是在格上往上爬，最终一定会到达一个不懂点。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/05/05/static-analysis-3/" data-id="cl1d6yih8001kkjw5h5s16bkt" data-title="南大静态分析-3" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pl/" rel="tag">pl</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/05/08/xss-encode/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          XSS编码
        
      </div>
    </a>
  
  
    <a href="/2020/05/04/static-analysis-2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">南大静态分析-2</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/" rel="tag">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pl/" rel="tag">pl</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/paper/" style="font-size: 15px;">paper</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/pl/" style="font-size: 20px;">pl</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/24/web/">Web应用系中注入类漏洞调研</a>
          </li>
        
          <li>
            <a href="/2022/02/18/data-mining/">data_mining</a>
          </li>
        
          <li>
            <a href="/2022/02/14/pop/">A Survey about PHP Object Injection</a>
          </li>
        
          <li>
            <a href="/2022/02/06/logic-machine/">Logic Machine</a>
          </li>
        
          <li>
            <a href="/2022/01/26/fuz/">Fuzzing</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 iohex<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>